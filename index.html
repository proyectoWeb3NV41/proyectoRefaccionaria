<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrontEnd Store</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link href="https://fonts.googleapis.com/css2?family=Staatliches&display=swap" rel="stylesheet">
    <!-- Carga el núcleo de Firebase JS SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
    <!-- Agrega el manejo de autenticación. -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
    <script src="js/init.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
        <a href="index.html">
            <h1>PROYECTO PROGRAMACION WEB</h1>
        </a>
    </header>
    <div class="nombre">
        <h6>Sánchez Romero José Manuel</h6>
    </div>

    <nav class="navegacion">
        <a class="navegacion__enlace navegacion__enlace--activo" href="index.html">Tienda</a>
        <a class="navegacion__enlace navegacion__enlace--activo" href="existencias.html">Productos</a>
    </nav>

    <main class="contenedor">
        <h1>Nuestros Productos</h1>

        <div class="grid">
            <div class="producto">
                <a href="balatas.html">
                    <img class="producto__imagen" src="img/balatas.jpg" alt="balatas">
                    <div class="producto__informacion">
                        <p class="producto__nombre">balatas</p>
                        <div class="ir">
                            <a href="balatas.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>  <!--.producto-->
            <div class="producto">
                <a href="faros.html">
                    <img class="producto__imagen" src="img/faros automotrices.jpg" alt="faros">
                    <div class="producto__informacion">
                        <p class="producto__nombre">faros</p>
                        <div class="ir">
                            <a href="faros.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>  <!--.producto-->
            <div class="producto">
                <a href="kits.html">
                    <img class="producto__imagen" src="img/kitsAfinacion.jpg" alt="kits">
                    <div class="producto__informacion">
                        <p class="producto__nombre">Kits de afinación</p>
                        <div class="ir">
                        <a href="kits.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>  <!--.producto-->
            <div class="producto">
                <a href="neumaticos.html">
                    <img class="producto__imagen" src="img/neumaticos.jpg "alt="Neumaticos">
                    <div class="producto__informacion">
                        <p class="producto__nombre">Neumaticos</p>
                        <div class="ir">
                            <a href="neumaticos.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>
            <div class="productoE">
                <a href="facias.html">
                    <img class="producto__imagen" src="img/facia.jpg "alt="Facia">
                    <div class="producto__informacion">
                        <p class="producto__nombre">Facias</p>
                        <div class="ir">
                            <a href="facias.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>
            <div class="productoA">
                <a href="embragues.html">
                    <img class="producto__imagen" src="img/embragues.jpg "alt="embragues">
                    <div class="producto__informacion">
                        <p class="producto__nombre">Embragues</p>
                        <div class="ir">
                            <a href="embragues.html" >comprar</a>
                        </div>
                    </div>
                </a>
            </div>

            
            <div class="grafico grafico--camisas"></div>
            <div class="grafico grafico--node"></div>
        </div>
    </main>

    <footer class="footer">
        <p class="footer__texto">SANCHEZ ROMERO JOSE MANUEL</p>
    </footer>
    <script>
        //@ts-check
        /** Conexión al sistema de autenticación de Firebase. */
        // @ts-ignore
        const auth = firebase.auth();
        /** Tipo de autenticación de usuarios. En este caso es con Google. */
        // @ts-ignore
        const provider = new firebase.auth.GoogleAuthProvider();
        /* Configura el proveedor de Google para que permita seleccionar de una
         * lista. */
        provider.setCustomParameters({ prompt: "select_account" });
        /* Recibe una función que se invoca cada que hay un cambio en la
         * autenticación y recibe el modelo con las características del usuario.*/
        auth.onAuthStateChanged(
          /** Recibe las características del usuario o null si no ha iniciado
           * sesión. */
          usuarioAuth => {
            if (usuarioAuth && usuarioAuth.email) {
              // Usuario aceptado.
              // @ts-ignore Muestra el email registrado en Google.
              email.value = usuarioAuth.email;
              // @ts-ignore Muestra el nombre registrado en Google.
              nombre.value = usuarioAuth.displayName;
              // @ts-ignore Muestra el avatar registrado en Google.
              avatar.src = usuarioAuth.photoURL;
            } else {
              // No ha iniciado sesión. Pide datos para iniciar sesión.
              auth.signInWithRedirect(provider); 
            }
          },
          // Función que se invoca si hay un error al verificar el usuario. //
          procesaError
        );
        /** Termina la sesión. */
        async function terminaSesión() {
          try {
            await auth.signOut();
          } catch (e) {
            procesaError(e);
          }
        }
        /** Procesa un error. Muestra el objeto en la consola y un cuadro de
         * alerta con el mensaje.
         * @param {Error} e descripción del error. */
        function procesaError(e) {
          console.log(e);
          alert(e.message);
        }
      </script> 
</body>
</html>
